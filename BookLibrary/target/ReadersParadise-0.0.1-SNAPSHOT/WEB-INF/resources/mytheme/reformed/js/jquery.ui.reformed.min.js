(function(a){a.widget("ui.reformed",{options:{styleFileInputs:true,styleRadios:true,styleCheckboxes:true,styleSelects:true,styleButtonsWithUniform:false,styleDatepicker:true},_init:function(){var m=this;var d=m.options;var c=m.element;var b=c.find("fieldset");var i=c.find("legend");var e=c.find('input[type="text"] , input[type="password"] , textarea');var l=c.find("select");var n=c.find('input[type="file"]');var h=c.find('input[type="checkbox"]');var j=c.find('input[type="radio"]');var k=c.find('input[type="reset"] , input[type="submit"], button');var g=c.find('input[type="text"].datepicker');var f=c.find('input[type="text"].human');c.addClass("ui-widget");b.addClass("ui-widget ui-widget-content ui-corner-all");i.addClass("ui-widget ui-widget-header ui-corner-all");e.addClass("ui-widget ui-widget-content ui-corner-all");c.find("dl, fieldset").addClass("ui-helper-clearfix");e.each(function(){a(this).focusin(function(){a(this).addClass("ui-state-highlight")});a(this).focusout(function(){a(this).removeClass("ui-state-highlight")})});k.each(function(){if(a(this).hasClass("ui-button")===false){a(this).button()}});if(d.styleFileInputs){m._styleWithUniform(n)}if(d.styleSelects){m._styleWithUniform(l)}if(d.styleRadios){m._styleWithUniform(j)}if(d.styleCheckboxes){m._styleWithUniform(h)}if(d.styleButtonsWithUniform){m._styleWithUniform(k)}if(d.styleDatepicker){g.each(function(){a(this).removeClass("hasDatepicker").datepicker();if(a("#ui-datepicker-div").data("wrapped")!==true){a("#ui-datepicker-div").wrap('<div class="reformed-form"></div>').data("wrapped",true)}})}f.each(function(){if(a(this).data("added")!==true){var r=a(this);r.data("added",true);var v=a(this).parent().parent().find("label.verification_question");var p=c.find('input[type="submit"], button[type="submit"]');p.attr("disabled",true);var o=["What is 1 + 7?;8","What is 2 + 5?;7","What is 3 - 2?;1","What is 10 - 7?;3","What is 5 - 0?;5"];var u=o[Math.floor(Math.random()*o.length)];var t=u.split(";");var q=t[0];var s=t[1];v.html("Human Verification: "+q);r.keyup(function(){a("dd#verification_error").remove();var w=a(this).val();if(w===s){p.attr("disabled",false);a("dd#verificaton_error").remove()}else{a(this).val("").focus();a(this).parent().append('<dd id="verification_error" class="ui-state-error" style="display: block;">\n                                                <span class="ui-icon ui-icon-alert"></span>\n                                                <label class="error_msg" style="display: block;">Incorrect verification answer. Please try again.</label></dd>')}})}})},_styleWithUniform:function(b){var c=b;a.each(c,function(){if(a(this).is("select")&&(a(this).attr("multiple")=="multiple"||a(this).attr("size")>1)){a(this).addClass("ui-widget-content ui-corner-tl ui-corner-bl")}else{if(a(this).data("uniformed")!==true){a(this).uniform();a(this).attr("data-uniformed",true);a.uniform.update(a(this))}}})},_setOption:function(d,h){var b=d;var i=h;if(b==="styleFileInputs"&&i===false){var j=this.element.find('input[type="file"]').removeAttr("data-uniformed");a.uniform.restore(j)}else{if(b==="styleRadios"&&i===false){var e=this.element.find('input[type="radio"]').removeAttr("data-uniformed");a.uniform.restore(e)}else{if(b==="styleCheckboxes"&&i===false){var c=this.element.find('input[type="checkbox"]').removeAttr("data-uniformed");a.uniform.restore(c)}else{if(b==="styleSelects"&&i===false){var g=this.element.find("select").removeAttr("data-uniformed");a.uniform.restore(g)}else{if(b==="styleButtonsWithUniform"&&i===true){var f=this.element.find('input[type="reset"], input[type="submit"], button').attr("data-uniformed",true);f.uniform()}else{if(b==="styleDatepicker"&&i===false){this.element.find(".hasDatepicker").removeClass("datepicker hasDatepicker")}}}}}}a.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);